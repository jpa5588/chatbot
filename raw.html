<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>NFL Raw XML Viewer</title>
  <style>
    :root { --bg:#f6f7f9; --me:#dff0ff; --bot:#fff; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: Arial, sans-serif; background:var(--bg); display:flex; height:100vh; }
    .chat { max-width:900px; margin:auto; width:100%; display:flex; flex-direction:column; gap:12px; padding:20px; }
    .messages { background:#e9edf3; border-radius:12px; padding:16px; overflow:auto; flex:1; }
    .msg { display:inline-block; padding:10px 12px; border-radius:12px; margin:8px 0; max-width:100%; }
    .me  { background:var(--me); align-self:flex-end; }
    .bot { background:var(--bot); align-self:flex-start; }
    .inputbar { display:flex; gap:10px; }
    input[type=text] { flex:1; padding:12px; border:1px solid #cbd3df; border-radius:10px; }
    button { padding:12px 16px; border:0; background:#2563eb; color:#fff; border-radius:10px; cursor:pointer; }
    button:disabled { opacity:.6; cursor:not-allowed; }
    table { border-collapse: collapse; width:100%; }
    th, td { border:1px solid #ddd; padding:6px 8px; }
    th { background:#f4f4f4; }
    .hint { color:#555; font-size:13px; margin-top:-6px; }
    .error { color:#b00020; }
	pre#output { color: #e2e8f0; padding: 14px; border-radius: 8px; white-space: pre-wrap; word-wrap: break-word; overflow-x: auto;
}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>NFL XML View</h1>
    <div class="hint">Type a season like <code>2024REG</code>, <code>2024PRE</code>, or <code>2024POST</code>.</div>

    <form id="form">
      <input id="season" type="text" placeholder="e.g., 2024REG" autocomplete="off" />
      <button type="submit">Fetch XML</button>
    </form>

    <pre id="output">Enter a season and press “Fetch XML”.</pre>
  </div>

  <script>
    const form = document.getElementById('form');
    const seasonInput = document.getElementById('season');
    const output = document.getElementById('output');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const season = seasonInput.value.trim().toUpperCase();
      if (!season) return;

      output.textContent = `Fetching raw XML for ${season}...`;

      try {
        const res = await fetch(`/api/middlewarelogic.php?season=${encodeURIComponent(season)}`, {
          headers: { 'Accept': 'application/xml' }
        });

        const text = await res.text();
        if (!res.ok) throw new Error(`HTTP ${res.status}: ${text.slice(0,120)}...`);

        output.textContent = text.replace(/></g, '>\n<');
      } catch (err) {
        output.textContent = '';
        const div = document.createElement('div');
        div.className = 'error';
        div.textContent = `Error: ${err.message}`;
        output.parentElement.insertBefore(div, output);
        setTimeout(() => div.remove(), 5000);
      }
    });
  </script>
</body>
</html>